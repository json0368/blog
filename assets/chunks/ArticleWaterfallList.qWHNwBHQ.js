import{u as G,h as V,c as Q,E as X,i as J,j as K,a as R,k as O,l as Y,m as ee,n as W,o as D,q as te}from"./theme.BwlHciAm.js";import{d as T,h as k,f as y,j as ae,A as F,I as ne,C as E,o as a,D as S,a as c,H as A,b as d,Q as b,P as j,u as M,n as H,G as w,F as P,X as B,E as U,e as Z,$ as le,_ as N,w as q,av as se}from"./framework.PYX7eaCS.js";function oe(v){if(!v)return"";const l=/`/g;return v.replaceAll(l,"")}const re=["href","aria-hidden","aria-label"],ie={class:"elysium-ui__card--content flex flex-col pb-4"},ue={key:0,class:"elysium-ui__card--cover-container z-0 relative w-full h-full overflow-hidden"},ce=["src","alt","aria-label"],de={class:"elysium-ui__card--title font-bold text-lg pt-4 pl-4 pr-4"},pe=["href"],fe={key:0},he={key:1,class:"elysium-ui__card--description text-tertiary pt-4 pl-4 pr-4 text-sm"},me={class:"elysium-ui__card--tags flex flex-wrap gap-2 pt-4 pl-4 pr-4"},ve=T({__name:"ElyCard",props:{content:{default:()=>({url:"",createdAt:0,readingTime:0,wordsCount:0,imgCount:0,src:"",html:"",frontmatter:{title:"",description:"",link:"",cover:"",tags:[]},excerpt:""})},maxWidth:{default:280},as:{default:"card"}},emits:["loaded","suspense"],setup(v,{emit:l}){const s=G(),n=l,_=k(!1),f=k(!1),z=k(!1),I=()=>{z.value=!0,_.value=!0,n("loaded")},e=v,t=y(()=>e.as==="link"),o=y(()=>Math.min(e.maxWidth,280)),r=y(()=>Math.max(e.maxWidth,280));function p(C){s.resetTags(),s.pushSelectedTags(C),J.go()}const u=k(V(e.content.createdAt));let i=null;function h(){i!==null&&clearInterval(i);const C=K(e.content.createdAt);i=setInterval(()=>{u.value=V(e.content.createdAt),h()},C)}ae(async()=>{h(),await F(),e.content.frontmatter.cover?setTimeout(()=>{_.value||n("suspense")},1e3):(_.value=!0,n("loaded")),requestAnimationFrame(()=>{f.value=!0})}),ne(()=>{i!==null&&clearInterval(i)});const g=k(!1);return(C,m)=>{const x=Q,L=X;return a(),E(le(t.value?"a":"div"),{class:H(["elysium-ui__card__container w-full grid rounded-[3px] overflow-hidden hover:shadow-card-hover hover:scale-102 transition-all duration-500 relative",{"no-cover":!e.content.frontmatter.cover,"opacity-0":!f.value,"opacity-100":f.value}]),style:Z({minWidth:`${o.value}px`,maxWidth:`${r.value}px`}),href:t.value&&b(j)(e.content.url)},{default:S(()=>[e.content.url?(a(),c("a",{key:0,href:b(j)(e.content.url),class:"absolute inset-0 w-full h-full z-1",tabindex:"-1","aria-hidden":g.value,"aria-label":`Read more about ${e.content.frontmatter.title}`,onMouseover:m[0]||(m[0]=$=>g.value=!1),onMouseleave:m[1]||(m[1]=$=>g.value=!0)},null,40,re)):A("",!0),d("div",ie,[e.content.frontmatter.cover?(a(),c("div",ue,[d("img",{class:H(["elysium-ui__card--cover w-full block object-cover transition-opacity duration-500",{loaded:z.value}]),src:e.content.frontmatter.cover,alt:e.content.frontmatter.title,"aria-label":`文章「${e.content.frontmatter.title}」的封面图片`,onLoad:I,onError:m[2]||(m[2]=$=>n("suspense")),loading:"eager"},null,42,ce)])):A("",!0),d("h2",de,[d("a",{href:b(j)(e.content.url)},w(b(oe)(e.content.frontmatter.title)),9,pe)]),M(x,{size:0,divider:"・",wrap:"",class:"pt-1 pl-4 pr-4 text-tertiary text-xs"},{default:S(()=>[d("span",null,w(u.value),1),d("span",null,w(e.content.wordsCount)+" 字"+w(),1),e.content.imgCount>0?(a(),c("span",fe,w(e.content.imgCount)+" 张图片",1)):A("",!0),d("span",null,w(e.content.readingTime)+" 分钟读完",1)]),_:1}),e.content.frontmatter.description?(a(),c("p",he,w(e.content.frontmatter.description),1)):A("",!0),d("div",me,[(a(!0),c(P,null,B(e.content.frontmatter.tags,$=>(a(),E(L,{key:$,class:"z-2",id:$,title:`搜索含有「${$}」标签的文章`,size:"small",clickable:"",onClick:Pe=>p($)},{default:S(()=>[U(w($),1)]),_:2},1032,["id","title","onClick"]))),128))])])]),_:1},8,["class","style","href"])}}}),_e=N(ve,[["__scopeId","data-v-f0e11f2b"]]),ge={class:"elysium-ui__pagination w-full flex justify-center items-center gap-2"},ye=T({__name:"ElyPagination",props:{total:{},current:{default:1},pageSize:{default:50}},emits:["change"],setup(v,{emit:l}){const s=v,n=k(s.current),_=y(()=>{const t=[],o=I.value,r=n.value;if(o<=7){for(let i=1;i<=o;i++)t.push({type:"number",value:i});return t}t.push({type:"number",value:1});let p=Math.max(2,r-2),u=Math.min(o-1,r+2);u-p<4&&(p===2?u=Math.min(o-1,p+4):u===o-1&&(p=Math.max(2,u-4))),p>2&&t.push({type:"ellipsis",value:Math.max(1,r-5)});for(let i=p;i<=u;i++)t.push({type:"number",value:i});return u<o-1&&t.push({type:"ellipsis",value:Math.min(o,r+5)}),t.push({type:"number",value:o}),t});function f(t){n.value=t==="prev"?W(n.value-1,1,s.total):W(n.value+1,1,s.total)}function z(t){n.value=W(t,1,s.total)}const I=y(()=>Math.ceil(s.total/s.pageSize)),e=l;return q(n,()=>{e("change",n.value)}),(t,o)=>(a(),c("div",ge,[M(R,{secondary:"",style:{width:"32px",height:"32px",padding:"0"},onClick:o[0]||(o[0]=r=>f("prev")),disabled:n.value===1,"aria-label":"Previous Page"},{default:S(()=>[M(b(O))]),_:1},8,["disabled"]),(a(!0),c(P,null,B(_.value,(r,p)=>(a(),E(R,{key:p,secondary:r.value!==n.value,style:{width:"32px",height:"32px",padding:"0"},class:H({"bg-primary text-white":r.value===n.value}),onClick:u=>z(r.value),"aria-label":`Page ${r.value}`},{default:S(()=>[r.type==="number"?(a(),c(P,{key:0},[U(w(r.value),1)],64)):(a(),E(b(Y),{key:1}))]),_:2},1032,["secondary","class","onClick","aria-label"]))),128)),M(R,{secondary:"",style:{width:"32px",height:"32px",padding:"0"},onClick:o[1]||(o[1]=r=>f("next")),disabled:n.value===I.value,"aria-label":"Next Page"},{default:S(()=>[M(b(ee))]),_:1},8,["disabled"])]))}}),Ce=["width","height"],xe={id:"Frame 2"},we=["stroke","stroke-width"],ke=["fill"],be=T({__name:"ElyIconBlackHole",props:{size:{default:"16"},color:{default:"#2f2826"},strokeWidth:{default:"1"},rotate:{default:0}},setup(v){return(l,s)=>(a(),c("svg",{width:l.size,height:l.size,viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("g",xe,[d("path",{id:"Ellipse 1 (Stroke)",d:"M113 260.591C153.832 262.744 203.038 264 256 264C308.962 264 358.168 262.744 399 260.591",stroke:b(D)(l.color),"stroke-width":l.strokeWidth},null,8,we),d("path",{id:"Union",d:"M256 95C317.627 95 371.165 129.626 398.225 180.483C425.422 227.732 430.26 238.327 457.668 243.683C491.708 247.078 512 251.352 512 256C512 262.307 474.633 267.93 416.251 271.596C408.407 353.196 339.656 417 256 417C172.344 417 103.592 353.196 95.748 271.596C37.3669 267.93 0 262.307 0 256C0 251.639 17.8693 247.603 48.2002 244.316C63.2573 242.014 72.0975 239.053 79.9844 231.87C84.9444 227.353 89.5467 221.148 95.0625 212.332C100.427 203.758 106.634 192.752 114.864 178.471C142.255 128.715 195.189 95 256 95ZM379.782 273.509C343.096 275.095 300.898 276 256 276C211.102 276 168.903 275.095 132.217 273.509C140.731 334.255 192.907 381 256 381C319.093 381 371.268 334.255 379.782 273.509ZM256 131C186.964 131 131 186.964 131 256C131 256.48 131.002 256.96 131.008 257.439C167.846 259.065 210.493 260 256 260C301.507 260 344.153 259.065 380.991 257.439C380.997 256.96 381 256.48 381 256C381 186.964 325.036 131 256 131Z",fill:b(D)(l.color)},null,8,ke)])],8,Ce))}}),$e={class:"ely-empty-state flex flex-col items-center justify-center gap-4"},Ie=T({__name:"ElyEmptyState",setup(v){return(l,s)=>(a(),c("div",$e,[M(be,{size:"100",color:"var(--color-accent-text-tertiary)"}),s[0]||(s[0]=d("p",{class:"text-sm text-tertiary ellipsis-followed"}," 你似乎来到了一片空白宇宙 ",-1))]))}}),Me=N(Ie,[["__scopeId","data-v-cb4a970d"]]),ze={key:0,class:"article-list__waterfall flex flex-col w-full gap-8"},Se={class:"article-list__waterfall__articles-container flex justify-between w-full items-start"},Ee=T({__name:"ArticleWaterfallList",props:{posts:{},width:{default:1280}},setup(v){const l=v,s=k(1),n=k(20),_=y(()=>Math.max(Math.floor(l.width/290),1)),f=y(()=>l.width>=375?280:l.width),z=y(()=>W((l.width-_.value*f.value)/(_.value-1||1),24,32)),I=se("waterfallContainerRef"),e=k([]);async function t(h=0){await F();const g=I.value;if(!g)return 0;let C=1/0,m=0;for(let x=0;x<g.length;x++){const L=g[x].offsetHeight+h;L<C&&(C=L,m=x)}return m}function o(){t()}function r(){t(400)}const p=y(()=>te(l.posts,n.value)),u=y(()=>p.value[s.value-1]);q(()=>[_.value,f.value,u.value],async()=>{if(e.value=Array.from({length:_.value},()=>[]),u.value.length!==0)for(const h of u.value){const g=await t();e.value[g].push(h)}});function i(h){s.value=h}return(h,g)=>{const C=_e;return h.posts.length>0?(a(),c("div",ze,[d("div",Se,[(a(!0),c(P,null,B(e.value,m=>(a(),c("div",{class:"article-list__waterfall-item flex flex-col",style:Z({gap:`${z.value}px`,width:`${f.value}px`}),ref_for:!0,ref_key:"waterfallContainerRef",ref:I},[(a(!0),c(P,null,B(m,x=>(a(),E(C,{key:x.url,content:x,"max-width":f.value,onLoaded:o,onSuspense:r},null,8,["content","max-width"]))),128))],4))),256))]),M(ye,{total:h.posts.length,current:s.value,"page-size":n.value,onChange:i},null,8,["total","current","page-size"])])):(a(),E(Me,{key:1}))}}}),Ae=N(Ee,[["__scopeId","data-v-00f87cb6"]]);export{Ae as A};
